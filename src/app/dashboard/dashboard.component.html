<!-- 在適當位置加入 LINE 綁定區塊 -->
<div class="line-binding-section" *ngIf="showLineBinding">
  <div class="card">
    <div class="card-header">
      <h5><i class="fas fa-mobile-alt"></i> LINE Bot 綁定</h5>
    </div>
    <div class="card-body">
      <div class="row">
        <div class="col-md-6">
          <div class="qr-code-container text-center">
            <h6>掃描 QR Code 綁定 LINE</h6>
            <div class="qr-code-wrapper">
              <img [src]="lineBindingQR" alt="LINE 綁定 QR Code" class="qr-code-img">
            </div>
            <p class="text-muted mt-2">使用 LINE 掃描此 QR Code 完成綁定</p>
          </div>
        </div>
        <div class="col-md-6">
          <div class="binding-info">
            <h6>綁定狀態</h6>
            <div class="status-indicator" [class.bound]="isLineBound">
              <i class="fas" [class.fa-check-circle]="isLineBound" [class.fa-times-circle]="!isLineBound"></i>
              <span>{{ isLineBound ? '已綁定' : '未綁定' }}</span>
            </div>
            
            <div *ngIf="isLineBound" class="bound-info">
              <p><strong>綁定時間：</strong>{{ bindingInfo?.boundAt | date:'yyyy-MM-dd HH:mm' }}</p>
              <p><strong>LINE ID：</strong>{{ bindingInfo?.lineId }}</p>
            </div>
            
            <div *ngIf="!isLineBound" class="binding-steps">
              <h6>綁定步驟：</h6>
              <ol>
                <li>打開 LINE 應用程式</li>
                <li>搜尋或掃描我們的 LINE Bot</li>
                <li>發送「綁定」指令</li>
                <li>掃描此頁面的 QR Code</li>
                <li>完成綁定</li>
              </ol>
            </div>
            
            <div class="binding-actions mt-3">
              <button class="btn btn-primary" (click)="refreshBindingStatus()">
                <i class="fas fa-sync-alt"></i> 刷新狀態
              </button>
              <button class="btn btn-outline-danger" *ngIf="isLineBound" (click)="unbindLine()">
                <i class="fas fa-unlink"></i> 解除綁定
              </button>
            </div>
          </div>
        </div>
      </div>
      
      <div class="line-features mt-4">
        <h6>綁定後可享受的功能：</h6>
        <div class="row">
          <div class="col-md-4">
            <div class="feature-item">
              <i class="fas fa-chart-line text-primary"></i>
              <h6>學習分析</h6>
              <p>在 LINE 中查看學習進度和建議</p>
            </div>
          </div>
          <div class="col-md-4">
            <div class="feature-item">
              <i class="fas fa-calendar-alt text-success"></i>
              <h6>行事曆</h6>
              <p>同步網站學習計畫和提醒</p>
            </div>
          </div>
          <div class="col-md-4">
            <div class="feature-item">
              <i class="fas fa-brain text-info"></i>
              <h6>個人化測驗</h6>
              <p>根據學習進度推薦題目</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
