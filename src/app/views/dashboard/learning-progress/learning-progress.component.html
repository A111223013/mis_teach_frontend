<div class="learning-progress-container p-4">
  <c-card>
    <c-card-header class="bg-primary text-white">
      <h3 class="mb-0">
        <c-icon name="cilChart" class="me-2"></c-icon>
        學習進度
      </h3>
    </c-card-header>
    <c-card-body>
      <div *ngIf="loading" class="text-center py-5">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">載入中...</span>
        </div>
        <p class="mt-3">載入學習數據中...</p>
      </div>

      <div *ngIf="!loading">
        <h5 class="mb-4">整體學習進度</h5>
        
        <c-row class="mb-5">
          <c-col xs="12" md="6" xl="3">
            <div class="progress-card bg-light p-4 rounded mb-3">
              <h2 class="text-primary mb-0">{{ overallProgress }}%</h2>
              <p class="text-muted">整體進度</p>
              <c-progress thin class="mb-2">
                <c-progress-bar [value]="overallProgress" color="primary"></c-progress-bar>
              </c-progress>
              <small class="text-muted">自本學期開始</small>
            </div>
          </c-col>
          
          <c-col xs="12" md="6" xl="3">
            <div class="progress-card bg-light p-4 rounded mb-3">
              <h2 class="text-success mb-0">{{ completedTopics }}</h2>
              <p class="text-muted">已掌握知識點</p>
              <c-progress thin class="mb-2">
                <c-progress-bar [value]="(completedTopics / totalTopics) * 100" color="success"></c-progress-bar>
              </c-progress>
              <small class="text-muted">總知識點: {{ totalTopics }}</small>
            </div>
          </c-col>
          
          <c-col xs="12" md="6" xl="3">
            <div class="progress-card bg-light p-4 rounded mb-3">
              <h2 class="text-warning mb-0">{{ totalQuizCount }}</h2>
              <p class="text-muted">總測驗次數</p>
              <div class="d-flex align-items-center">
                <span class="badge bg-success me-2">正確率</span>
                <span>{{ correctRate }}%</span>
              </div>
            </div>
          </c-col>
          
          <c-col xs="12" md="6" xl="3">
            <div class="progress-card bg-light p-4 rounded mb-3">
              <h2 class="text-danger mb-0">{{ totalTime }}</h2>
              <p class="text-muted">學習總時數</p>
              <div class="d-flex align-items-center">
                <span class="badge bg-info me-2">本週</span>
                <span>{{ weeklyTime }} 小時</span>
              </div>
            </div>
          </c-col>
        </c-row>
        
        <h5 class="mb-4">知識點學習進度</h5>
        
        <div class="topic-progress-container">
          <div *ngFor="let topic of topicProgressList" class="topic-progress-item mb-4">
            <div class="d-flex justify-content-between align-items-center mb-2">
              <h6 class="mb-0">{{ topic.name }}</h6>
              <span class="badge bg-light text-dark">{{ topic.progress }}%</span>
            </div>
            <c-progress thin class="mb-1">
              <c-progress-bar 
                [value]="topic.progress" 
                [color]="getProgressColor(topic.progress)">
              </c-progress-bar>
            </c-progress>
            <div class="d-flex justify-content-between">
              <small class="text-muted">完成 {{ topic.completedSubtopics }}/{{ topic.totalSubtopics }} 個子知識點</small>
              <small class="text-muted">最近學習: {{ topic.lastStudied }}</small>
            </div>
          </div>
        </div>
        
        <h5 class="mb-4">學習趨勢</h5>
        
        <c-row>
          <c-col xs="12" md="6">
            <c-card class="mb-4">
              <c-card-header>每週學習時間 (小時)</c-card-header>
              <c-card-body>
                <div class="chart-placeholder bg-light rounded p-5 text-center">
                  <p class="text-muted mb-0">圖表數據載入中</p>
                  <p class="text-muted">(實際應用中應顯示條形圖)</p>
                </div>
              </c-card-body>
            </c-card>
          </c-col>
          
          <c-col xs="12" md="6">
            <c-card class="mb-4">
              <c-card-header>測驗成績趨勢</c-card-header>
              <c-card-body>
                <div class="chart-placeholder bg-light rounded p-5 text-center">
                  <p class="text-muted mb-0">圖表數據載入中</p>
                  <p class="text-muted">(實際應用中應顯示折線圖)</p>
                </div>
              </c-card-body>
            </c-card>
          </c-col>
        </c-row>
        
        <h5 class="mb-4">建議學習計劃</h5>
        
        <c-card>
          <c-card-body>
            <div class="recommendations">
              <div *ngFor="let rec of recommendations; let i = index" class="recommendation-item p-3 mb-2 rounded">
                <div class="d-flex align-items-start">
                  <div class="recommendation-icon me-3">
                    <span class="badge rounded-pill bg-primary">{{ i + 1 }}</span>
                  </div>
                  <div class="recommendation-content">
                    <h6 class="mb-1">{{ rec.title }}</h6>
                    <p class="text-muted mb-2">{{ rec.description }}</p>
                    <div class="d-flex align-items-center">
                      <c-badge color="info" class="me-2">{{ rec.topic }}</c-badge>
                      <small class="text-muted">預計時間: {{ rec.estimatedTime }}</small>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </c-card-body>
        </c-card>
      </div>
    </c-card-body>
  </c-card>
</div> 