.learning-analysis-container {
  padding: 20px;
  min-height: 100vh;
  background-color: #f8f9fa;
}

// 1️⃣ Summary 區塊
.summary-section {
  .summary-title {
    font-size: 1.5rem;
    font-weight: 600;
    color: #2c3e50;
    
    i {
      color: #007bff;
    }
  }
  
  .summary-subtitle {
    font-size: 1rem;
    color: #6c757d;
    font-style: italic;
  }
  
  .kpi-card {
    transition: all 0.3s ease;
    border: 2px solid transparent;
    height: 100%;
    
    &:hover {
      transform: translateY(-3px);
      box-shadow: 0 4px 16px rgba(0,0,0,0.15);
    }
    
    &.weakness {
      border-color: #dc3545;
      background: linear-gradient(135deg, #fff5f5 0%, #ffffff 100%);
    }
    
    .kpi-icon {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto;
      font-size: 1.5rem;
      
      &.correct-rate {
        background: linear-gradient(135deg, #28a745, #20c997);
        color: white;
      }
      
      &.practice-count {
        background: linear-gradient(135deg, #007bff, #6610f2);
        color: white;
      }
      
      &.study-stage {
        background: linear-gradient(135deg, #17a2b8, #20c997);
        color: white;
      }
      
      &.weakness-icon {
        background: linear-gradient(135deg, #dc3545, #e74c3c);
        color: white;
      }
    }
    
    .kpi-number {
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 5px;
      color: #2c3e50;
    }
    
    .kpi-label {
      color: #6c757d;
      font-size: 0.9rem;
      margin: 0;
    }
  }
}

// 2️⃣ 弱點分析區塊
.weakness-analysis-section {
  .chart-container {
    height: 300px;
    position: relative;
  }
}

// 3️⃣ 個人化學習建議區塊
.learning-suggestions-section {
  .learning-path {
    .path-step {
      padding: 15px;
      border-radius: 8px;
      border: 2px solid #e9ecef;
      transition: all 0.3s ease;
      
      &.current {
        border-color: #007bff;
        background: linear-gradient(135deg, #f8f9ff 0%, #ffffff 100%);
      }
      
      &.completed {
        border-color: #28a745;
        background: linear-gradient(135deg, #f8fff8 0%, #ffffff 100%);
      }
    }
  }
  
  .recommended-questions {
    .question-group {
      h6 {
        font-size: 0.9rem;
        font-weight: 600;
        color: #6c757d;
        margin-bottom: 10px;
      }
    }
  }
}

// 4️⃣ 互動式知識圖譜區塊
.knowledge-graph-section {
  .graph-legend {
    .legend-item {
      display: flex;
      align-items: center;
      font-size: 0.85rem;
      color: #6c757d;
      
      .legend-color {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        margin-right: 5px;
        
        &.mastered {
          background-color: #28a745;
        }
        
        &.learning {
          background-color: #ffc107;
        }
        
        &.struggling {
          background-color: #dc3545;
        }
      }
    }
  }
  
  .knowledge-graph-container {
    height: 500px;
    border: 1px solid #dee2e6;
    border-radius: 8px;
    overflow: hidden;
    
    .graph-visualization {
      width: 100%;
      height: 100%;
      
      .graph-placeholder {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100%;
        background: #f8f9fa;
        
        i {
          color: #6c757d;
        }
      }
    }
  }
}

// 5️⃣ 知識點掌握狀況
.knowledge-overview-section {
  .filter-legend {
    .legend-item {
      display: flex;
      align-items: center;
      font-size: 0.85rem;
      color: #6c757d;
      
      .legend-color {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        margin-right: 5px;
        
        &.mastered {
          background-color: #28a745;
        }
        
        &.learning {
          background-color: #ffc107;
        }
        
        &.struggling {
          background-color: #dc3545;
        }
      }
    }
  }
  
  .knowledge-hierarchy-container {
    .hierarchy-item {
      .domain-card {
        cursor: pointer;
        transition: all 0.3s ease;
        
        &:hover {
          transform: translateY(-2px);
          box-shadow: 0 4px 16px rgba(0,0,0,0.15);
        }
        
        .domain-name {
          font-size: 1.25rem;
          font-weight: 600;
          color: #2c3e50;
          display: flex;
          align-items: center;
          
          i {
            transition: transform 0.3s ease;
            
            &.rotated {
              transform: rotate(90deg);
            }
          }
        }
        
        .domain-description {
          font-size: 0.9rem;
          line-height: 1.4;
        }
        
        .domain-stats {
          .stat-item {
            display: flex;
            align-items: center;
            font-size: 0.85rem;
            color: #495057;
            
            i {
              font-size: 1rem;
            }
          }
        }
      }
      
      .blocks-container {
        .block-item {
          .block-card {
            cursor: pointer;
            transition: all 0.3s ease;
            
            &:hover {
              background: #f8f9fa;
              border-color: #007bff;
            }
            
            .block-name {
              font-size: 1rem;
              font-weight: 500;
              color: #495057;
              display: flex;
              align-items: center;
              
              i {
                transition: transform 0.3s ease;
                
                &.rotated {
                  transform: rotate(90deg);
                }
              }
            }
            
            .block-description {
              font-size: 0.8rem;
            }
            
            .block-stats {
              .stat-item {
                display: flex;
                align-items: center;
                font-size: 0.75rem;
                color: #6c757d;
                
                i {
                  font-size: 0.9rem;
                }
              }
            }
          }
          
          .concepts-container {
            .concept-item {
              .concept-card {
                cursor: pointer;
                transition: all 0.3s ease;
                
                &:hover {
                  background: #f8f9fa;
                  border-color: #007bff;
                  transform: translateX(5px);
                }
                
                .concept-name {
                  font-size: 0.9rem;
                  font-weight: 500;
                  color: #495057;
                }
                
                .progress-info {
                  span {
                    font-size: 0.75rem;
                    color: #6c757d;
                  }
                }
                
                .practice-info {
                  font-size: 0.7rem;
                  color: #6c757d;
                }
              }
            }
          }
        }
      }
    }
  }
}

// Modal 樣式
.modal-content {
  .section-title {
    font-size: 1rem;
    font-weight: 600;
    color: #2c3e50;
    margin-bottom: 15px;
    
    i {
      color: #007bff;
    }
  }
  
  .basic-info-section {
    .info-item {
      margin-bottom: 15px;
      
      .info-label {
        font-size: 0.85rem;
        font-weight: 600;
        color: #6c757d;
        margin-bottom: 5px;
      }
      
      .info-value {
        font-size: 0.9rem;
        color: #495057;
        margin: 0;
      }
    }
  }
  
  .ai-analysis-section {
    .ai-analysis-content {
      .analysis-item {
        .analysis-title {
          font-size: 0.9rem;
          font-weight: 600;
          color: #2c3e50;
          margin-bottom: 8px;
        }
        
        .analysis-text {
          font-size: 0.85rem;
          color: #495057;
          line-height: 1.5;
          margin: 0;
          white-space: pre-line;
        }
      }
    }
  }
}

// 載入狀態
.loading-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(255, 255, 255, 0.9);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  
  .loading-content {
    text-align: center;
    
    p {
      color: #6c757d;
      margin-top: 15px;
    }
  }
}

// 無數據提示
.no-data-message {
  .text-center {
    i {
      color: #6c757d;
    }
    
    h5 {
      color: #495057;
      margin-top: 15px;
    }
    
    p {
      color: #6c757d;
    }
  }
}

// 響應式設計
@media (max-width: 768px) {
  .learning-analysis-container {
    padding: 10px;
  }
  
  .summary-section {
    .row {
      .col-md-3 {
        margin-bottom: 15px;
      }
    }
  }
  
  .weakness-analysis-section {
    .row {
      .col-md-6 {
        margin-bottom: 20px;
      }
    }
  }
  
  .learning-suggestions-section {
    .row {
      .col-md-6 {
        margin-bottom: 20px;
      }
    }
  }
}