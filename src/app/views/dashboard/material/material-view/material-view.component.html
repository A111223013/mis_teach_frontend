<div class="material-reader">
  <!-- 頂部導航 -->
  <header class="reader-header">
    <button class="back-button" (click)="goBack()">
      <i class="cil-arrow-left"></i>
      <span>返回目錄</span>
    </button>
    <h1 class="document-title">{{ filename }}</h1>
  </header>

  <!-- 主要內容區域 -->
  <main class="reader-main">
    <!-- 側邊目錄 -->
    <aside class="toc-panel">
      <div class="toc-content">
        <h3>目錄</h3>
        <nav id="toc-list" class="toc-nav"></nav>
      </div>
    </aside>

    <!-- 文章內容 -->
    <article class="content-area">
      <div class="markdown-content" id="content">
        <markdown [data]="content" (ready)="onMarkdownReady()"></markdown>
      </div>
    </article>
  </main>

  <!-- 文字選擇工具 -->
  <div 
    *ngIf="showButtons" 
    class="selection-tools"
    [style.left.px]="buttonPosition.x"
    [style.top.px]="buttonPosition.y"
  >
    <button class="tool-btn primary" (click)="highlightSelectedText()">
      <i class="cil-highlight"></i>
      <span>劃記</span>
    </button>
    <button class="tool-btn secondary" (click)="askQuestion()">
      <i class="cil-question-mark"></i>
      <span>詢問</span>
    </button>
  </div>

  <!-- 顏色選擇工具 -->
  <div 
    *ngIf="showColorPicker" 
    class="color-picker-tools"
    [style.left.px]="colorPickerPosition.x"
    [style.top.px]="colorPickerPosition.y"
  >
    <div class="color-grid">
      <button 
        *ngFor="let color of highlightColors" 
        class="color-btn"
        [style.background-color]="color.value"
        [title]="color.name"
        (click)="selectColorAndHighlight(color.value)"
      ></button>
    </div>
  </div>
</div>